<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Proposta Nº {{ proposta.numero_proposta }}</title>

<style>
@page {
    size: A4;
    margin: 2cm;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11pt;
    color: #2c2c2c;
    line-height: 1.6;
}

h1 {
    text-align: center;
    font-size: 18pt;
    letter-spacing: 1px;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 3px solid #1f3a5f;
    color: #1f3a5f;
    text-transform: uppercase;
}

.section {
    margin-bottom: 28px;
    page-break-inside: avoid;
}

.section-title {
    font-size: 13pt;
    font-weight: bold;
    background: #f0f3f6;
    color: #1f3a5f;
    padding: 10px 15px;
    border-left: 6px solid #1f3a5f;
    margin-bottom: 15px;
    text-transform: uppercase;
}

.field {
    margin: 6px 0;
}

.field strong {
    display: inline-block;
    width: 220px;
    color: #1f3a5f;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

td {
    padding: 8px 10px;
    border-bottom: 1px solid #ddd;
}

td:first-child {
    font-weight: bold;
    width: 65%;
    color: #1f3a5f;
}

.total {
    background: #e8f4ea;
    font-weight: bold;
    font-size: 12pt;
}

.total td {
    border: none;
    color: #1a7f37;
}

.destaque {
    background: #fff3cd;
    border-left: 5px solid #ffc107;
    padding: 12px 15px;
    margin: 15px 0;
    font-size: 10.5pt;
}

.footer {
    margin-top: 40px;
    border-top: 2px solid #ccc;
    padding-top: 20px;
    text-align: center;
    font-size: 9pt;
    color: #555;
}
</style>
</head>

<body>

<h1>Proposta de Compra e Venda</h1>

<div class="section">
    <div class="section-title">Empreendimento</div>
    <div class="field"><strong>Empreendimento:</strong> {{ proposta.empreendimento.nome }}</div>
    <div class="field"><strong>Endereço:</strong> {{ proposta.empreendimento.rua }}, {{ proposta.empreendimento.numero }} - {{ proposta.empreendimento.bairro }} - {{ proposta.empreendimento.cidade }}/{{ proposta.empreendimento.estado }}</div>
    <div class="field"><strong>Unidade:</strong> {{ proposta.unidade.numero }}</div>
    <div class="field"><strong>Corretor:</strong> {{ proposta.corretor.get_full_name }} | CRECI {{ proposta.corretor.creci }}</div>
</div>

<div class="section">
    <div class="section-title">Comprador</div>
    <div class="field"><strong>Cliente:</strong> {{ proposta.cliente.nome_completo }}</div>
    <div class="field"><strong>CPF:</strong> {{ proposta.cliente.cpf }}</div>
    <div class="field"><strong>Endereço:</strong> {{ proposta.cliente.rua }}, {{ proposta.cliente.numero }} - {{ proposta.cliente.bairro }} - {{ proposta.cliente.cidade }}/{{ proposta.cliente.estado }}</div>
</div>

<div class="section">
    <div class="section-title">Valores da Negociação</div>

    <table>
        <tr><td>Valor do Imóvel</td><td align="right">R$ {{ proposta.unidade.valor_imovel|floatformat:2 }}</td></tr>
        <tr><td>Financiamento</td><td align="right">R$ {{ proposta.valor_financiamento|floatformat:2 }}</td></tr>
        <tr><td>Subsídio</td><td align="right">R$ {{ proposta.valor_subsidio|floatformat:2 }}</td></tr>
        <tr><td>FGTS</td><td align="right">R$ {{ proposta.valor_fgts|floatformat:2 }}</td></tr>
        <tr><td>Sinal</td><td align="right">R$ {{ proposta.valor_sinal|floatformat:2 }}</td></tr>
        <tr><td>Entrada</td><td align="right">R$ {{ proposta.valor_entrada|floatformat:2 }}</td></tr>
    </table>

    <table>
        <tr><td>Parcelamento com Construtora (sem juros)</td><td align="right">R$ {{ proposta.valor_construtora|floatformat:2 }}</td></tr>
        <tr><td>Parcelamento com Juros</td><td align="right">R$ {{ proposta.valor_com_juros|floatformat:2 }}</td></tr>
        <tr><td>Parcelas</td><td align="right">{{ proposta.quantidade_parcelas }} x R$ {{ proposta.valor_parcela_cliente|floatformat:2 }}</td></tr>
        <tr class="total"><td>Total da Aprovação</td><td align="right">R$ {{ proposta.total_aprovacao|floatformat:2 }}</td></tr>
    </table>
</div>

<div class="destaque">
    <strong>Importante:</strong>  
    O valor de <strong>R$ {{ proposta.valor_construtora|floatformat:2 }}</strong> é o valor **sem juros**, utilizado para contrato.  
    O valor de <strong>R$ {{ proposta.valor_com_juros|floatformat:2 }}</strong> corresponde ao total financiado com os encargos.
</div>

{% if proposta.observacoes %}
<div class="section">
    <div class="section-title">Observações</div>
    {{ proposta.observacoes|linebreaks }}
</div>
{% endif %}

<div class="footer">
    <strong>{{ config.nome_empresa }}</strong><br>
    {{ config.cidade }}/{{ config.estado }} — CNPJ {{ config.cnpj }}<br>
    {{ config.telefone }} — {{ config.email }}<br><br>
    Proposta Nº {{ proposta.numero_proposta }} — Emitida em {{ data_hoje }}
</div>

</body>
</html>
